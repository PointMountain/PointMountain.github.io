<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>mihoyo | Ming</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
    <meta name="description" content="学习文档">
    <link rel="preload" href="/mo/assets/css/0.styles.4ab656b6.css" as="style"><link rel="preload" href="/mo/assets/js/app.6fbcfbdc.js" as="script"><link rel="preload" href="/mo/assets/js/2.3f89376a.js" as="script"><link rel="preload" href="/mo/assets/js/8.4a350904.js" as="script"><link rel="prefetch" href="/mo/assets/js/10.34316d92.js"><link rel="prefetch" href="/mo/assets/js/11.c5c1d607.js"><link rel="prefetch" href="/mo/assets/js/12.a262b3f4.js"><link rel="prefetch" href="/mo/assets/js/13.dce731da.js"><link rel="prefetch" href="/mo/assets/js/14.d8f61348.js"><link rel="prefetch" href="/mo/assets/js/15.50c51543.js"><link rel="prefetch" href="/mo/assets/js/16.e474df0d.js"><link rel="prefetch" href="/mo/assets/js/17.6ed8ce0f.js"><link rel="prefetch" href="/mo/assets/js/18.1a769362.js"><link rel="prefetch" href="/mo/assets/js/19.b813b52c.js"><link rel="prefetch" href="/mo/assets/js/20.7840e4c1.js"><link rel="prefetch" href="/mo/assets/js/21.3348c916.js"><link rel="prefetch" href="/mo/assets/js/22.512f4f43.js"><link rel="prefetch" href="/mo/assets/js/23.26a3b275.js"><link rel="prefetch" href="/mo/assets/js/24.1377ea80.js"><link rel="prefetch" href="/mo/assets/js/25.cfceb4c2.js"><link rel="prefetch" href="/mo/assets/js/26.9ea8dfc5.js"><link rel="prefetch" href="/mo/assets/js/27.c61d0554.js"><link rel="prefetch" href="/mo/assets/js/28.8676ab23.js"><link rel="prefetch" href="/mo/assets/js/29.4fea2295.js"><link rel="prefetch" href="/mo/assets/js/3.46bbd3f3.js"><link rel="prefetch" href="/mo/assets/js/30.d3717f55.js"><link rel="prefetch" href="/mo/assets/js/31.99f7fc49.js"><link rel="prefetch" href="/mo/assets/js/32.5a8bac30.js"><link rel="prefetch" href="/mo/assets/js/33.5eae774a.js"><link rel="prefetch" href="/mo/assets/js/4.22ede151.js"><link rel="prefetch" href="/mo/assets/js/5.2a0d6252.js"><link rel="prefetch" href="/mo/assets/js/6.275bec27.js"><link rel="prefetch" href="/mo/assets/js/7.1dc468b1.js"><link rel="prefetch" href="/mo/assets/js/9.80bd8a88.js">
    <link rel="stylesheet" href="/mo/assets/css/0.styles.4ab656b6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/mo/" class="home-link router-link-active"><!----> <span class="site-name">Ming</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/mo/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mo/Vue/Vue-base.html" class="nav-link">
  Vue基础使用
</a></li><li class="dropdown-item"><!----> <a href="/mo/Vue/Vue-advanced.html" class="nav-link">
  Vue高级特性
</a></li><li class="dropdown-item"><!----> <a href="/mo/Vue/Vuex.html" class="nav-link">
  Vuex
</a></li><li class="dropdown-item"><!----> <a href="/mo/Vue/Vue-router.html" class="nav-link">
  Vue-router
</a></li><li class="dropdown-item"><!----> <a href="/mo/Vue/Vue-principle.html" class="nav-link">
  Vue原理
</a></li><li class="dropdown-item"><!----> <a href="/mo/Vue/Vue-code.html" class="nav-link">
  Vue源码解析
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="React" class="dropdown-title"><span class="title">React</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mo/React/React-State.html" class="nav-link">
  React State
</a></li><li class="dropdown-item"><!----> <a href="/mo/React/React-Props.html" class="nav-link">
  React Props
</a></li><li class="dropdown-item"><!----> <a href="/mo/React/React-Refs.html" class="nav-link">
  React Refs
</a></li><li class="dropdown-item"><!----> <a href="/mo/React/React-Router.html" class="nav-link">
  React Router
</a></li><li class="dropdown-item"><!----> <a href="/mo/React/React-Redux.html" class="nav-link">
  React Redux Router
</a></li><li class="dropdown-item"><!----> <a href="/mo/React/React-Extension.html" class="nav-link">
  React Extension
</a></li><li class="dropdown-item"><!----> <a href="/mo/React/React-cli-proxy.html" class="nav-link">
  React脚手架配置代理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="webpack" class="dropdown-title"><span class="title">webpack</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mo/webpack/Base.html" class="nav-link">
  基础学习
</a></li><li class="dropdown-item"><!----> <a href="/mo/webpack/Principle.html" class="nav-link">
  原理学习
</a></li></ul></div></div><div class="nav-item"><a href="/mo/Typescript/" class="nav-link">
  Typescript
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试整理" class="dropdown-title"><span class="title">面试整理</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mo/Interview/2020.html" class="nav-link">
  2020面试
</a></li><li class="dropdown-item"><!----> <a href="/mo/Interview/2021.html" class="nav-link router-link-exact-active router-link-active">
  2021面试
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="杂记" class="dropdown-title"><span class="title">杂记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mo/others/Base.html" class="nav-link">
  基础学习
</a></li><li class="dropdown-item"><!----> <a href="/mo/others/Network.html" class="nav-link">
  网络学习
</a></li><li class="dropdown-item"><!----> <a href="/mo/others/Connect.html" class="nav-link">
  网络连接方式
</a></li><li class="dropdown-item"><!----> <a href="/mo/others/Monitor.html" class="nav-link">
  前端监控
</a></li><li class="dropdown-item"><!----> <a href="/mo/others/Performance.html" class="nav-link">
  性能优化
</a></li><li class="dropdown-item"><!----> <a href="/mo/others/SomeJS.html" class="nav-link">
  随手写代码
</a></li><li class="dropdown-item"><!----> <a href="/mo/others/myPromise.html" class="nav-link">
  Promise代码
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/PointMountain/mo" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GayHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/mo/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mo/Vue/Vue-base.html" class="nav-link">
  Vue基础使用
</a></li><li class="dropdown-item"><!----> <a href="/mo/Vue/Vue-advanced.html" class="nav-link">
  Vue高级特性
</a></li><li class="dropdown-item"><!----> <a href="/mo/Vue/Vuex.html" class="nav-link">
  Vuex
</a></li><li class="dropdown-item"><!----> <a href="/mo/Vue/Vue-router.html" class="nav-link">
  Vue-router
</a></li><li class="dropdown-item"><!----> <a href="/mo/Vue/Vue-principle.html" class="nav-link">
  Vue原理
</a></li><li class="dropdown-item"><!----> <a href="/mo/Vue/Vue-code.html" class="nav-link">
  Vue源码解析
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="React" class="dropdown-title"><span class="title">React</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mo/React/React-State.html" class="nav-link">
  React State
</a></li><li class="dropdown-item"><!----> <a href="/mo/React/React-Props.html" class="nav-link">
  React Props
</a></li><li class="dropdown-item"><!----> <a href="/mo/React/React-Refs.html" class="nav-link">
  React Refs
</a></li><li class="dropdown-item"><!----> <a href="/mo/React/React-Router.html" class="nav-link">
  React Router
</a></li><li class="dropdown-item"><!----> <a href="/mo/React/React-Redux.html" class="nav-link">
  React Redux Router
</a></li><li class="dropdown-item"><!----> <a href="/mo/React/React-Extension.html" class="nav-link">
  React Extension
</a></li><li class="dropdown-item"><!----> <a href="/mo/React/React-cli-proxy.html" class="nav-link">
  React脚手架配置代理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="webpack" class="dropdown-title"><span class="title">webpack</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mo/webpack/Base.html" class="nav-link">
  基础学习
</a></li><li class="dropdown-item"><!----> <a href="/mo/webpack/Principle.html" class="nav-link">
  原理学习
</a></li></ul></div></div><div class="nav-item"><a href="/mo/Typescript/" class="nav-link">
  Typescript
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试整理" class="dropdown-title"><span class="title">面试整理</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mo/Interview/2020.html" class="nav-link">
  2020面试
</a></li><li class="dropdown-item"><!----> <a href="/mo/Interview/2021.html" class="nav-link router-link-exact-active router-link-active">
  2021面试
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="杂记" class="dropdown-title"><span class="title">杂记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mo/others/Base.html" class="nav-link">
  基础学习
</a></li><li class="dropdown-item"><!----> <a href="/mo/others/Network.html" class="nav-link">
  网络学习
</a></li><li class="dropdown-item"><!----> <a href="/mo/others/Connect.html" class="nav-link">
  网络连接方式
</a></li><li class="dropdown-item"><!----> <a href="/mo/others/Monitor.html" class="nav-link">
  前端监控
</a></li><li class="dropdown-item"><!----> <a href="/mo/others/Performance.html" class="nav-link">
  性能优化
</a></li><li class="dropdown-item"><!----> <a href="/mo/others/SomeJS.html" class="nav-link">
  随手写代码
</a></li><li class="dropdown-item"><!----> <a href="/mo/others/myPromise.html" class="nav-link">
  Promise代码
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/PointMountain/mo" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GayHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/mo/Interview/2020.html" class="sidebar-link">2020面试整理</a></li><li><a href="/mo/Interview/2021.html" class="active sidebar-link">2021面试整理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mo/Interview/2021.html#mihoyo" class="sidebar-link">mihoyo</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="mihoyo"><a href="#mihoyo" class="header-anchor">#</a> mihoyo</h2> <h3 id="一面"><a href="#一面" class="header-anchor">#</a> 一面</h3> <h4 id="盒模型"><a href="#盒模型" class="header-anchor">#</a> 盒模型</h4> <ul><li>IE 盒模型 box-sizing: border-box; 盒子宽度为 offsetWidth =&gt; padding + border + width</li> <li>W3C 标准盒模型 box-sizing: content-box; 盒子宽度为 offsetWidth =&gt; width</li></ul> <p>offsetWidth = border + padding + width
clientWidth = padding + width
offsetTop 获取当前元素到定位父节点的 top 方向的距离
scrollWidth 元素内容真实宽度，内容不超过盒子宽度时为盒子的 clientWidth</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">#div1</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ccc<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="margin-负值情况"><a href="#margin-负值情况" class="header-anchor">#</a> margin 负值情况</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">.xx</span> <span class="token punctuation">{</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> -10px<span class="token punctuation">;</span>
    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> -10px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>当宽度固定时，<code>margin-left</code>为负值，会向左移动；<code>margin-right</code>为负值，没有变化</li> <li>当宽度不固定时，<code>margin-left</code>为负值，会向左增加宽度；<code>margin-right</code>为负值，会向右增加宽度</li> <li><code>margin-top</code>为负值，会产生向上的移动</li> <li><code>margin-bottom</code>为负值，本身不会位移，但是会导致下方内容向上移动</li></ul> <h4 id="bfc-块级格式化上下文"><a href="#bfc-块级格式化上下文" class="header-anchor">#</a> BFC 块级格式化上下文</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">p</span> <span class="token punctuation">{</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
      <span class="token property">margin-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
      <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>A<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>B<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- AB距离 BFC内部margin合并 只有15px --&gt;</span>
</code></pre></div><h5 id="触发-bfc"><a href="#触发-bfc" class="header-anchor">#</a> 触发 BFC</h5> <ul><li>body 根元素</li> <li>浮动元素：float 除 none 以外的值</li> <li>绝对定位元素：<code>position: absolute;</code>，<code>position: fixed;</code></li> <li>overflow 除了 visible 以外的值（hidden/auto/scroll）</li> <li>display 为 inline-block/table-cells/flex</li></ul> <h5 id="bfc-特性"><a href="#bfc-特性" class="header-anchor">#</a> BFC 特性</h5> <ul><li>内部兄弟元素之间 margin 会进行合并，取最大值</li> <li>计算 BFC 高度时浮动元素也参与计算，BFC 解决了高度塌陷问题</li> <li>BFC 的区域不会与浮动容器发生重叠</li> <li>BFC 是独立容器，容器内部元素不会影响外部元素</li> <li>解决父子元素 margin 重叠问题，非 BFC 最上方子元素的<code>margin-top</code>会与父元素<code>margin-top</code>重叠，最下方子元素<code>margin-bottom</code>会与父元素<code>margin-bottom</code>重叠，取最大值
<ul><li>通过使父元素变为 BFC 可以解决重叠问题</li> <li>通过设置父元素 padding 或 border 属性解决</li> <li>通过子元素与父元素之间增加行内元素解决</li></ul></li></ul> <h4 id="flex"><a href="#flex" class="header-anchor">#</a> flex</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">.box</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> space-around<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.father</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">flex-direction</span><span class="token punctuation">:</span> colunm<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.item1</span> <span class="token punctuation">{</span>
    <span class="token property">align-self</span><span class="token punctuation">:</span> flex-start<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.item3</span> <span class="token punctuation">{</span>
    <span class="token property">align-self</span><span class="token punctuation">:</span> flex-end<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>x<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>x<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>x<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
--- x x x ---
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>father<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>外层容器属性：</p> <ul><li><code>flex-direction</code>设置主轴方向，默认为<code>row</code>，即横向。<code>row | row-reverse | column | column-reverse;</code></li> <li><code>flex-wrap</code>设置是否换行，默认为<code>nowrap</code>，即不换行。<code>nowrap | wrap | wrap-reverse;</code></li> <li><code>flex-flow</code>为<code>flex-direction</code>与<code>flex-wrap</code>缩写。</li> <li><code>justify-content</code>定义了项目再主轴上的对齐方式
<ul><li><code>flex-start</code></li> <li><code>flex-end</code></li> <li><code>center</code></li> <li><code>space-between</code>项目从两端对齐，项目之间间隔相等</li> <li><code>space-around</code>项目左右空间相同</li> <li><code>space-evenly</code>空间完全均分</li></ul></li> <li><code>align-items</code>定义了项目在交叉轴上如何对齐
<ul><li><code>stretch</code>默认值，项目如果未设置高度或设为 auto，将占满整个容器的交叉轴</li> <li><code>flex-start</code></li> <li><code>flex-end</code></li> <li><code>center</code></li> <li><code>baseline</code>项目的第一行文字的基线对齐</li></ul></li> <li><code>align-content</code>定义了多根轴线的对齐方式，即<code>wrap</code>的情况，如果项目只有一根轴线，属性不起作用
<ul><li><code>stretch</code>默认值，项目如果未设置高度或设为 auto，将占满整个容器的交叉轴</li> <li><code>flex-start</code></li> <li><code>flex-end</code></li> <li><code>center</code></li> <li><code>space-between</code></li> <li><code>space-around</code></li> <li><code>space-evenly</code>
item 属性</li></ul></li> <li><code>order</code>定义 item 的排列顺序，越小越靠前，默认为 0</li> <li><code>flex-grow</code>定义项目放大比例，默认为 0，即不放大</li> <li><code>flex-shrink</code>定义项目缩小比例，默认为 1，如果空间不足，将被缩小</li> <li><code>flex-basis</code>设置 item 分配空间，默认值 auto，可以用百分比，也可以用固定数值</li> <li><code>flex</code>是<code>flex-grow</code>, <code>flex-shrink</code> 和 <code>flex-basis</code>的简写
<ul><li><code>flex: 1;</code> -&gt; <code>flex-grow: 1;flex-shrink: 1;flex-basis: 0%;</code></li> <li><code>flex: auto;</code> -&gt; <code>flex-grow: 1;flex-shrink: 1;flex-basis: auto;</code></li> <li><code>flex: none;</code> -&gt; <code>flex-grow: 0;flex-shrink: 0;flex-basis: auto;</code></li></ul></li> <li><code>align-self</code>设置单个 item 与其他 item 不一样的对齐方式，覆盖<code>align-items</code>属性
<ul><li><code>auto</code>默认值，表示继承父元素<code>align-items</code>属性</li> <li><code>flex-start</code></li> <li><code>flex-end</code></li> <li><code>center</code></li> <li><code>baseline</code></li> <li><code>stretch</code></li></ul></li></ul> <h4 id="页面自适应"><a href="#页面自适应" class="header-anchor">#</a> 页面自适应</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// JavaScript根据设备自动设置fontSize</span>
  <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>
    <span class="token keyword">let</span> <span class="token function-variable function">hadnler</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> rootWidth <span class="token operator">=</span> root<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>rootWidth <span class="token operator">&gt;=</span> <span class="token number">640</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        root<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> <span class="token string">&quot;85px&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        root<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> <span class="token punctuation">(</span>rootWidth <span class="token operator">/</span> <span class="token number">750</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;resize&quot;</span><span class="token punctuation">,</span> hadnler<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>rem</code>根据 html 元素的<code>font-size</code>自适应，1rem = 设置的 fontSize
<code>em</code>根据最近元素的<code>font-size</code>自适应，1em = 最近的 fontSize
<code>vh</code>相对于视窗的高度, 视窗(<code>window.innerHeight</code>)被均分为 100 单位的 vh
<code>vw</code>相对于视窗的宽度, 视窗(<code>window.innerWidth</code>)被均分为 100 单位的 vw
<code>width: 100%;</code>和<code>width: 100vw;</code>区别，vw 是整个视窗的宽度，包括右侧滚动条，100%是基于父元素宽度，不包含滚动条宽度</p> <h4 id="类型"><a href="#类型" class="header-anchor">#</a> 类型</h4> <p><code>typeof null === 'object'</code>
原因：JS 最初版本中使用的是 32 位系统，为了性能考虑使用低位存储变量的类型信息，000 开头代表对象，然而 null 表示为全 0，所以被判断为 object。
<code>instanceof</code>原理是原型链的查找</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">myInstanceof</span><span class="token punctuation">(</span><span class="token parameter">left<span class="token punctuation">,</span> right</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> proto <span class="token operator">=</span> left<span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>proto<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>proto <span class="token operator">===</span> right<span class="token punctuation">.</span>prorotype<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    proto <span class="token operator">=</span> proto<span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="原型"><a href="#原型" class="header-anchor">#</a> 原型</h5> <div class="language-js extra-class"><pre class="language-js"><code>Array <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
Array<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
<span class="token comment">// 修改Array原型使Array instanceof Array为true</span>
Array<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="vue-父子组件生命周期"><a href="#vue-父子组件生命周期" class="header-anchor">#</a> Vue 父子组件生命周期</h4> <p>洋葱圈
created
mounted
beforeUpdate
updated
destoryed</p> <div class="language- extra-class"><pre class="language-text"><code>父 beforeCreate
父 created
父 beforeMount
  子 beforeCreate
  子 created
  子 beforeMount
  子 mounted
父 mounted
父 beforeUpdate
  子 beforeUpdate
  子 updated
父 updated
父 beforeDestory
  子 beforeDestory
  子 destoryed
父 destoryed

如果子组件更新，那么只有子组件的beforeUpdate、updated会触发
</code></pre></div><h4 id="v-model"><a href="#v-model" class="header-anchor">#</a> v-model</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>MyInput v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;xxx&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">'inputValue'</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token comment">// 等价于</span>
<span class="token operator">&lt;</span>input <span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">'inputValue'</span> @input<span class="token operator">=</span><span class="token string">'inputValue = $event.target.value'</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token comment">// v-model为语法糖 默认会把value用作prop，把input用作event</span>
<span class="token comment">// 可以使用model选项重新设置</span>
model<span class="token operator">:</span> <span class="token punctuation">{</span>
  prop<span class="token operator">:</span> <span class="token string">'xxx'</span><span class="token punctuation">,</span>
  event<span class="token operator">:</span> <span class="token string">'change'</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="slot"><a href="#slot" class="header-anchor">#</a> slot</h4> <h5 id="编译作用域"><a href="#编译作用域" class="header-anchor">#</a> 编译作用域</h5> <blockquote><p>父级模板里的所有内容都是在父级作用域中编译的；子模板里的所有内容都是在子作用域中编译的。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>navigation<span class="token operator">-</span>link url<span class="token operator">=</span><span class="token string">&quot;/profile&quot;</span><span class="token operator">&gt;</span>
  Logged <span class="token keyword">in</span> <span class="token keyword">as</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> user<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>navigation<span class="token operator">-</span>link<span class="token operator">&gt;</span>
<span class="token comment">// 此时user是外面实例的user，而非navigation-link组件内部的user</span>
</code></pre></div><h5 id="后备内容"><a href="#后备内容" class="header-anchor">#</a> 后备内容</h5> <div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&quot;submit-button&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;button type='submit'&gt;&lt;slot&gt;submit&lt;/slot&gt;&lt;/button&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 如果外部使用submit-button且没有传slot，那么slot中的内容就作为后备内容显示</span>
</code></pre></div><h5 id="具名插槽"><a href="#具名插槽" class="header-anchor">#</a> 具名插槽</h5> <p>父元素可以通过<code>template</code>上使用<code>v-slot='xxx'</code>来为插槽命名，也可以直接缩写<code>#xxx</code>
组件里可以给<code>slot</code>使用<code>name='xxx'</code>来匹配内容</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 父级</span>
<span class="token operator">&lt;</span>base<span class="token operator">-</span>layout<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>template #header<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Here might be a page title<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token constant">A</span> paragraph <span class="token keyword">for</span> the main content<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>And another one<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>

  <span class="token operator">&lt;</span>template v<span class="token operator">-</span>slot<span class="token operator">:</span>footer<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Here's some contact info<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>base<span class="token operator">-</span>layout<span class="token operator">&gt;</span>
<span class="token comment">// 组件base-layout</span>
<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;container&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>header<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>slot name<span class="token operator">=</span><span class="token string">&quot;header&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>main<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>slot<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>main<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>footer<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>slot name<span class="token operator">=</span><span class="token string">&quot;footer&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>footer<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre></div><h5 id="作用域插槽"><a href="#作用域插槽" class="header-anchor">#</a> 作用域插槽</h5> <p>如果想让父级使用组件时也是用组件的作用域，可以使用作用域插槽
组件<code>slot</code>使用<code>v-bind:xxx='xxx'</code>
父级如果是单独一个插槽，可以直接在组件上使用<code>v-slot:default='slotProps'</code>，然后内部使用<code>slotProps.xxx</code>，也可以缩写为<code>v-slot='slotProps'</code>；如果是多个插槽，需要在每个插槽<code>template</code>上使用。插槽内容可结构<code>v-slot:default='{ xxx }'</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 组件current-user</span>
<span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>slot v<span class="token operator">-</span>bind<span class="token operator">:</span>user<span class="token operator">=</span><span class="token string">&quot;user&quot;</span><span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span> user<span class="token punctuation">.</span>lastName <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
<span class="token comment">// 父元素</span>
<span class="token operator">&lt;</span>current<span class="token operator">-</span>user<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>template v<span class="token operator">-</span>slot<span class="token operator">:</span><span class="token keyword">default</span><span class="token operator">=</span><span class="token string">&quot;slotProps&quot;</span><span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span> slotProps<span class="token punctuation">.</span>user<span class="token punctuation">.</span>firstName <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>current<span class="token operator">-</span>user<span class="token operator">&gt;</span>
<span class="token comment">// 单插槽时</span>
<span class="token operator">&lt;</span>current<span class="token operator">-</span>user v<span class="token operator">-</span>slot<span class="token operator">:</span><span class="token keyword">default</span><span class="token operator">=</span><span class="token string">&quot;slotProps&quot;</span><span class="token operator">&gt;</span>
  <span class="token punctuation">{</span><span class="token punctuation">{</span> slotProps<span class="token punctuation">.</span>user<span class="token punctuation">.</span>firstName <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>current<span class="token operator">-</span>user<span class="token operator">&gt;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// slots可以获取非作用域插槽</span>
vm<span class="token punctuation">.</span>$slots<span class="token punctuation">;</span>
<span class="token comment">// scopedSlots返回的是所有插槽，包括作用域插槽</span>
vm<span class="token punctuation">.</span>$scopedSlots<span class="token punctuation">;</span> <span class="token comment">// 对于包括 默认 slot 在内的每一个插槽，该对象都包含一个返回相应 VNode 的函数</span>
<span class="token comment">// vm.$scopedSlots.default() =&gt; [VNode, Vnode]</span>
</code></pre></div><h4 id="动态组件"><a href="#动态组件" class="header-anchor">#</a> 动态组件</h4> <p><code>&lt;component v-bind:is=&quot;currentTabComponent&quot;&gt;&lt;/component&gt;</code>
通过<code>is</code>来切换不同的组件，但是每次切换都会被销毁，可以使用<code>&lt;keep-alive&gt;&lt;/keep-alive&gt;</code>进行缓存</p> <h4 id="keep-alive"><a href="#keep-alive" class="header-anchor">#</a> keep-alive</h4> <p><code>v-if</code>组件不会渲染当前指令所在节点的 dom 元素，会调用<code>_e()</code>即<code>createEmptyVNode</code>创建空 VNode
<code>v-show</code>组件渲染出来，但是样式是<code>display: none;</code> <code>keep-alive</code></p> <ul><li>缓存不活动的组件实例，内部切换组件时触发组件<code>activated</code>和<code>deactivated</code>生命周期钩子</li> <li><code>include/exclude</code>去设置是否缓存内容，<code>max</code>设置缓存最大值，达到最大值时，创建新实例时，会删掉最久未使用的实例</li></ul> <h4 id="懒加载组件"><a href="#懒加载组件" class="header-anchor">#</a> 懒加载组件</h4> <p>通过<code>import()</code>动态引入的方式实现组件懒加载
配置路由懒加载以及组件引入组件懒加载都可以使用
<code>'my-component': () =&gt; import('./my-async-component')</code></p> <h4 id="vue-错误捕获"><a href="#vue-错误捕获" class="header-anchor">#</a> Vue 错误捕获</h4> <p><code>errorCaptured</code>是组件内部钩子，当捕获一个来自子孙组件的错误时被调用，接收 error、vm、info 三个参数，return false 后可以阻止错误继续向上抛出</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">errorCaptured</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> vm<span class="token punctuation">,</span> info</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> vm<span class="token punctuation">,</span> info<span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>hasError <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// 设置一个变量判断是否有错误 从而去切换兜底组件</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span> <span class="token comment">// 阻止错误向上抛出</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="vue-2-0-响应式"><a href="#vue-2-0-响应式" class="header-anchor">#</a> Vue 2.0 响应式</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 对象监听</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  enumerable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取值的时候做一些操作</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>newValue <span class="token operator">===</span> value<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token function">observe</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 继续劫持用户设置的新值 因为用户有可能设置一个对象</span>
    value <span class="token operator">=</span> newValue<span class="token punctuation">;</span>

    dep<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 通知依赖的watcher来通知更新操作</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取值的时候做一些操作</span>
    <span class="token comment">// 每个属性都对应着自己的watcher</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Dep<span class="token punctuation">.</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 如果当前有watcher</span>
      dep<span class="token punctuation">.</span><span class="token function">depend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 意味着要将watcher存起来  双向依赖</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>childOb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 数组的依赖收集</span>
        childOb<span class="token punctuation">.</span>dep<span class="token punctuation">.</span><span class="token function">depend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 收集了数组的相关依赖</span>
        <span class="token comment">// 如果数组中还有数组</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">dependArray</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 数组监听</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> arrayMethods <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>oldArrayMethods<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> methods <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">&quot;push&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;pop&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;unshift&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;shift&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;sort&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;reverse&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;splice&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
methods<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">method</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  arrayMethods<span class="token punctuation">[</span>method<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// AOP切片编程</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> oldArrayMethods<span class="token punctuation">[</span>method<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用原生的数组方法</span>
    <span class="token comment">// push unshift 添加的元素可能还是一个对象</span>
    <span class="token keyword">let</span> inserted<span class="token punctuation">;</span> <span class="token comment">// 当前用户插入的元素</span>
    <span class="token keyword">let</span> ob <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>__ob__<span class="token punctuation">;</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>method<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">&quot;push&quot;</span><span class="token operator">:</span>
      <span class="token keyword">case</span> <span class="token string">&quot;unshift&quot;</span><span class="token operator">:</span>
        inserted <span class="token operator">=</span> args<span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;splice&quot;</span><span class="token operator">:</span> <span class="token comment">// 3个 新增的属性 splice有删除 新增的功能</span>
        inserted <span class="token operator">=</span> args<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">default</span><span class="token operator">:</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>inserted<span class="token punctuation">)</span> ob<span class="token punctuation">.</span><span class="token function">observeArray</span><span class="token punctuation">(</span>inserted<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将新增属性继续观测</span>
    ob<span class="token punctuation">.</span>dep<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 如果用户调用了修改数组的方法 就通知当前dep去更新</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 进行监听</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 数组劫持有两个方面 一方面是对数组索引操作进行监控 一方面是对数组的每一项中的对象监控</span>
  value<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> arrayMethods<span class="token punctuation">;</span> <span class="token comment">// 装饰器模式 函数劫持</span>
  <span class="token comment">// 如果是数组的话不会对索引进行观测 因为会导致性能问题</span>
  <span class="token comment">// 前端开发中很少操作索引 一般是调用push pop unshift shift sort reverse splice</span>
  <span class="token comment">// 如果数组里放的是对象再监控</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">observeArray</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="vue-透传"><a href="#vue-透传" class="header-anchor">#</a> Vue 透传</h4> <p><code>vm.$attrs</code>，<code>vm.$listeners</code> <code>vm.$attrs</code>可以获取父作用域中未被 prop 识别的除 class，style 外的其它属性，可以通过<code>v-bind=&quot;$attrs&quot;</code>传给内部组件
<code>vm.$listeners</code>包含了父作用域中除<code>.native</code>修饰器的<code>v-on</code>事件监听器，可以通过<code>v-on=&quot;$listeners&quot;</code>传给内部组件</p> <h4 id="webpack"><a href="#webpack" class="header-anchor">#</a> webpack</h4> <p>webpack</p> <ul><li>loader 处理对应文件，接收文件或上个 loader 传入的内容，输出处理后的文件给下一个 loader 或处理完毕</li> <li>plugin 含有 apply 函数的类，apply 接收一个 compiler，通过 compiler.hooks.xxx.tap 注册钩子函数</li></ul> <h5 id="打包优化"><a href="#打包优化" class="header-anchor">#</a> 打包优化</h5> <ul><li>DLL（开发环境）</li> <li>external</li> <li>按需加载（路由懒加载，组件懒加载）</li> <li>splitChunks<div class="language-js extra-class"><pre class="language-js"><code>cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
  defualt<span class="token operator">:</span> <span class="token punctuation">{</span>
    chunks<span class="token operator">:</span> <span class="token string">'initial'</span><span class="token punctuation">,</span>
    minChunks<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'vue-common'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>压缩代码，按体积决定提取 CSS 文件</li> <li>thread-loader 多线程打包</li></ul> <h4 id="浏览器缓存"><a href="#浏览器缓存" class="header-anchor">#</a> 浏览器缓存</h4> <ul><li>协商缓存 304
<ul><li>Last-Modified / If-Modified-Since</li> <li>ETag / If-None-Match</li></ul></li> <li>强缓存 200
<ul><li>Expires</li> <li>cache-control
<ul><li>no-store 不缓存任何响应</li> <li>no-cache 资源被缓存，但是立即失效，下次会发起请求验证资源是否过期</li> <li>public 响应可以被客户端和代理服务器缓存</li> <li>private 响应只可以被客户端缓存</li> <li>max-age 最大缓存时间，过期需要重新请求</li> <li>s-maxage 覆盖 max-age，作用一样，只在代理服务器中生效</li> <li>max-stale 规定时间内，即使缓存过期，也使用该缓存</li> <li>min-fresh 希望在指定时间内获取最新的响应</li></ul></li></ul></li></ul> <h4 id="跨域"><a href="#跨域" class="header-anchor">#</a> 跨域</h4> <h5 id="jsonp"><a href="#jsonp" class="header-anchor">#</a> JSONP</h5> <p>服务端通过拿到参数中的 callback 参数，通过字符串拼接的方式将内容返回</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// node</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'ming'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">}</span>
http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span> callback <span class="token punctuation">}</span> <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">)</span>
  <span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>callback<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span>
  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 浏览器</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token keyword">function</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token comment">// { name: 'ming', age: 18 }</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">'http://127.0.0.1:8000?callback=getData'</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p>所以 jsonp 返回的内容比正常请求返回的 JSON 格式外多了一层回调函数，因为返回的函数名存在与本地 js 中，所以可以直接通过同名回调函数拿到 data</p> <h4 id="前端安全"><a href="#前端安全" class="header-anchor">#</a> 前端安全</h4> <h5 id="xss-跨站脚本漏洞"><a href="#xss-跨站脚本漏洞" class="header-anchor">#</a> XSS 跨站脚本漏洞</h5> <ul><li>持久性
攻击代码被服务端写入进数据库中，危害性大</li> <li>非持久性
一般通过修改 URL 参数的方式加入攻击代码，诱导用户访问链接从而进行攻击</li></ul> <h6 id="防御-xss-攻击"><a href="#防御-xss-攻击" class="header-anchor">#</a> 防御 XSS 攻击</h6> <ul><li>转移字符，转义用户输入输出的内容，对于引号、尖括号、斜杠进行转义</li> <li>CSP 建立白名单，开发者告诉浏览器哪些外部资源可以加载和执行
<ol><li>设置 HTTP Header 中的 Content-Security-Policy</li></ol> <ul><li><code>Content-Security-Policy: default-src 'self'</code> 只允许加载本站资源</li> <li><code>Content-Security-Policy: img-src https://*</code> 只允许加载 https 协议的图片</li> <li><code>Content-Security-Policy: child-src 'none'</code> 允许加载任何来源框架</li></ul> <ol start="2"><li>设置 mate 标签的方式<code>&lt;mate http-equiv=&quot;Content-Security-Policy&quot;&gt;</code></li> <li>但是有弊端：Eval 及相关函数被禁用、内嵌的 JavaScript 代码将不会执行、只能通过白名单来加载远程脚本。</li></ol></li></ul> <h5 id="csrf-跨站请求伪造"><a href="#csrf-跨站请求伪造" class="header-anchor">#</a> CSRF 跨站请求伪造</h5> <p>攻击者构造出一个后端请求地址，诱导用户点击或者通过某些途径自动发起请求。如果用户是在登录状态下的话，后端就以为是用户在操作，从而进行相应的逻辑。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 攻击者在钓鱼网站通过图片src地址设为评论接口 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.domain.com/xxx?comment='attack'<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h6 id="防御措施"><a href="#防御措施" class="header-anchor">#</a> 防御措施</h6> <ol><li>Get 请求不对数据进行操作</li> <li>不让第三方网站访问到用户 Cookie</li></ol> <ul><li>SameSite: 对 cookie 设置该属性，表示 cookie 不随着跨域请求发送，可以很大程度减少 CSRF 攻击</li></ul> <ol start="3"><li>阻止第三方网站请求接口</li></ol> <ul><li>验证 Referer: 通过验证 Referer(请求头携带) 来判断该请求是否为第三方网站发起的</li> <li>Token: 服务端下发一个随机 Token，每次发起请求时将 Token 携带上，服务器验证 Token 是否有效</li></ul> <h5 id="点击劫持"><a href="#点击劫持" class="header-anchor">#</a> 点击劫持</h5> <p>点击劫持是一种视觉欺骗的攻击手段。攻击者将需要攻击的网站通过 iframe 嵌套的方式嵌入自己的网页中，并将 iframe 设置为透明，在页面中透出一个按钮诱导用户点击。</p> <h6 id="防御措施-2"><a href="#防御措施-2" class="header-anchor">#</a> 防御措施</h6> <ul><li>X-FRAME-OPTIONS
<code>X-FRAME-OPTIONS</code>是一个 HTTP 响应头，就是为了防御 iframe 嵌套的点击劫持攻击，响应头有三个值可选</li></ul> <ol><li><code>DENY</code> 表示页面不允许通过 iframe 的方式展示</li> <li><code>SAMEORIGIN</code> 表示页面可以在相同域名下通过 iframe 的方式展示</li> <li><code>ALLOW-FROM</code> 表示页面可以在指定来源的 iframe 中展示</li></ol> <ul><li>JS 防御</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>click-jack<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">html</span> <span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> none <span class="token important">!important</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">if</span> <span class="token punctuation">(</span>self <span class="token operator">===</span> top<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> style <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;click-jack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>style<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      top<span class="token punctuation">.</span>location <span class="token operator">=</span> self<span class="token punctuation">.</span>location<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h5 id="中间人攻击"><a href="#中间人攻击" class="header-anchor">#</a> 中间人攻击</h5> <p>中间人攻击是攻击方同时与服务端和客户端建立起了连接，并让对方认为连接是安全的，但是实际上整个通信过程都被攻击者控制了。攻击者不仅能获得双方的通信信息，还能修改通信信息。
HTTPS 就可以用来防御中间人攻击，但是如果没有完全关闭 HTTP 访问，攻击方可以通过某些方式将 HTTPS 降级为 HTTP 从而实现中间人攻击</p> <p>https 代理处理 TLS？证书</p> <h3 id="简历相关知识"><a href="#简历相关知识" class="header-anchor">#</a> 简历相关知识</h3> <h4 id="前端监控-日志上报"><a href="#前端监控-日志上报" class="header-anchor">#</a> 前端监控 日志上报</h4> <ul><li><p><code>window.addEventListener('error', (event)=&gt;{})</code>监听 JS 代码错误或者引入资源错误</p></li> <li><p><code>window.addEventListener('unhandledrejection', (event)=&gt;{})</code>监听 promise 未被 catch 的错误</p></li> <li><p><code>XMLHttpRequest.prototype.open</code>和<code>XMLHttpRequest.prototype.send</code>重写底层方法，并监听<code>load, error, abort</code>事件，从而监听请求数据错误</p></li> <li><p>白屏监听就是用交叉一些点<code>document.elementsFromPoint(x, y)</code>去统计点对应 dom 是可以认为白屏 dom 元素的数量，以此来判断是否白屏</p></li> <li><p><code>window.performance.timing</code>可以拿到一些性能相关的数值</p></li> <li><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// PerformanceObserver API去获取一些复杂的性能</span>
<span class="token keyword">new</span> <span class="token class-name">PerformanceObserver</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">entryList<span class="token punctuation">,</span> observe</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> perfEntries <span class="token operator">=</span> entryList<span class="token punctuation">.</span><span class="token function">getEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> xxx <span class="token operator">=</span> perfEntries<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  observe<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token punctuation">{</span> entryTypes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;性能指标&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h4 id="性能优化"><a href="#性能优化" class="header-anchor">#</a> 性能优化</h4> <p>通过从 url 请求到页面渲染的流程来优化</p> <ul><li>HTTP 请求的话就优化下 webpack 相关的
减少请求的话就考虑下缓存相关内容 按需加载之类的<code>import()</code>
减少请求次数就优化 webpack 打包资源的合并 splitchunks、避免重复打包比如 vue 动态引入和静态引入一起使用，小图片使用 url-loader 处理等
减少单次请求花费时间的话就考虑 webpack 打包资源的压缩 使用更容易 Tree-shaking 处理的写法（ESM），且 webpack4 的话最好用什么就导出什么<code>import { xxx } from 'a.js'</code>而不是<code>import m from 'a.js'; m.xxx</code>，因为 webpack4 的 Tree-shaking 还不够完善，后一种情况会导致整个<code>a.js</code>被打包进去，webpack5 的话就随意了。
webpack 相关优化，有想实现一个自定义 plugin 去记录不同生命周期的消耗时间，有选择性的优化</li> <li>拿到内容后就是代码层面优化了图片懒加载，css 减少直接使用通配符以及标签选择器，嵌套也慎重；JS 相关就是减少频繁对 DOM 操作，较少重绘；用一些 CSS3 的属性<code>transform</code>等可以跳过重绘重排过程，直接 GPU 进行合成；<code>defer</code>标签 在 dom 解析完之后执行，<code>async</code>标签，文件下载完之后就执行</li></ul> <h4 id="vue-自定义指令"><a href="#vue-自定义指令" class="header-anchor">#</a> Vue 自定义指令</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 项目里手写了一个clickout自定义指令</span>
<span class="token comment">/*
  原理其实是在window注册了click监听事件，去监听el是否包含event.target，
  不包含的话说明就是el之外的dom点击了，就去触发binding里的value对应的方法
*/</span>
Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">bind</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">clickHandler</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 判断指令中是否绑定了函数</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>binding<span class="token punctuation">.</span>expression<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 如果绑定了函数 则调用那个函数，此处binding.value就是handleClose方法</span>
        binding<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 给当前元素绑定个私有变量，方便在unbind中可以解除事件监听</span>
    el<span class="token punctuation">.</span>__blur__ <span class="token operator">=</span> clickHandler<span class="token punctuation">;</span>
    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;mouseup&quot;</span><span class="token punctuation">,</span> clickHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">unbind</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 解除事件监听</span>
    document<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;mouseup&quot;</span><span class="token punctuation">,</span> el<span class="token punctuation">.</span>__blur__<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">delete</span> el<span class="token punctuation">.</span>__blur__<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="websocket-用处"><a href="#websocket-用处" class="header-anchor">#</a> WebSocket 用处</h4> <p>WebSocket 使用了 websocket 协议，全双工通信，实时性更强
上课直播进行实时交互
socket 内部进行了封装，如果发生错误会去进行重连，同时对一些信息的通用字段在内部进行了封装，外面使用时无需去考虑通用字段的获取</p> <h4 id="axios-canceltoken、axios-拦截器"><a href="#axios-canceltoken、axios-拦截器" class="header-anchor">#</a> axios CancelToken、axios 拦截器</h4> <p>项目中频繁的切换月份导致请求频繁，因此使用了 axios 的 CancelToken 去进行处理
CancelToken 其实是通过调用 axios 向外抛出的一个<code>resolvePromise</code>方法去取消请求</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> CancelToken <span class="token operator">=</span> axios<span class="token punctuation">.</span>CancelToken<span class="token punctuation">;</span>
<span class="token keyword">let</span> commonCancelList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">request</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 如果判断请求时使用CancelToken，就把它放到请求后面</span>
  request <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    cancelToken<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">CancelToken</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">cancel</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 将CancelToken生成的取消函数放到外部数组中</span>
      commonCancelList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cancel<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 如果要取消，直接循环调用commonCancelList内的取消函数即可</span>
</code></pre></div><h4 id="webpack-升级-4-后坑点"><a href="#webpack-升级-4-后坑点" class="header-anchor">#</a> webpack 升级 4 后坑点</h4> <p>postcss-px2rem 插件 换成 postcss-pxtorem 插件
导致 css 使用<code>/*no*/</code>失效
通过自定义 loader 解决，正则匹配到<code>px; /*no*/</code>之后将<code>px</code>转化为<code>PX</code>，之后交给后面 loader 继续处理</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex">/px(?=.*\/\*\s*no\s*\*\/)/gi</span><span class="token punctuation">;</span>
  source <span class="token operator">=</span> source<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">_</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">&quot;PX&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> _<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="webpack-通过优化-sourcemap-来进行优化开发打包速度"><a href="#webpack-通过优化-sourcemap-来进行优化开发打包速度" class="header-anchor">#</a> webpack 通过优化 SourceMap 来进行优化开发打包速度</h4> <p>之后去了解了原理，webpack 实际根据 devtool 的内容去匹配使用不同 Plugin 使用，因此也可以手动去使用插件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// devtool为eval时使用的插件</span>
webpack<span class="token punctuation">.</span>EvalDevToolModulePlugin<span class="token punctuation">;</span>
<span class="token comment">// devtool为xxx-source-map时使用的插件</span>
webpack<span class="token punctuation">.</span>EvalSourceMapDevToolPlugin<span class="token punctuation">;</span>
webpack<span class="token punctuation">.</span>SourceMapDevToolPlugin<span class="token punctuation">;</span>
<span class="token comment">/* sourcemap的插件内部可以设置一些参数：
  module 对应是否是loader转化前的源代码
  columns 对应是否开启错误的列提示，不开启的话代码错误只提示到行
*/</span>
<span class="token comment">// 对应的就是devtool: eval-cheap-module-source-map</span>
<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>EvalSourceMapDevToolPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  exclude<span class="token operator">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
  columns<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="监课性能问题于是想到用-web-worker-遇到的坑点"><a href="#监课性能问题于是想到用-web-worker-遇到的坑点" class="header-anchor">#</a> 监课性能问题于是想到用 web worker 遇到的坑点</h4> <p>web worker 的引用 webworker 的解析 loader 版本与 webpack 版本间的问题</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">&quot;work.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 参数必须是网络获取的脚本文件，不能是本地资源</span>
<span class="token comment">// webpack中处理</span>
<span class="token comment">// 使用woker-loader去处理，有坑点webpack3不能用2.0.0以上版本的loader，会直接报错</span>
<span class="token keyword">import</span> Worker <span class="token keyword">from</span> <span class="token string">&quot;./work.js&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 用了loader之后import进来的就是处理过的worker文件了</span>
<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 直接new就可以了</span>

<span class="token comment">// webpack5可以直接使用url生成文件地址 就不需要worker-loader了</span>
<span class="token keyword">const</span> workerURL <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">&quot;./work.js&quot;</span><span class="token punctuation">,</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span>workerURL<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>消息交互由于是异步任务，导致返回不确定，因此通过 promise 封装一层，确保使用更方便</p> <p><code>window.addEventListener('message', handler)</code>接收不到 worker 发送的消息
索性通过 MessageChannel 的管道进行通信，最终成功了</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 主线程内</span>
<span class="token keyword">const</span> channel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
channel<span class="token punctuation">.</span>port1<span class="token punctuation">.</span>onmessage <span class="token operator">=</span> handler<span class="token punctuation">;</span>
worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>channel<span class="token punctuation">.</span>port2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// worker内</span>
self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span>ports<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 拿到event.ports[0]传过来的管道进行通信</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>为了信息安全，可以给每条消息增加一个唯一的 messageId 去进行区分</p> <h4 id="答题器-iframe-的交互"><a href="#答题器-iframe-的交互" class="header-anchor">#</a> 答题器 iframe 的交互</h4> <p>用 iframe 的好处可以方便其他端通过 webview 直接引入，
坏处是 iframe 页面与主页面直接需要进行很多信息交互，来确认页面是否加载成功了，消息是否收到了等等
优化是使用 promise 封装一层 iframe，看到一个<code>postmate</code>库，但是没有完成优化</p> <h4 id="vue-ssr-了解"><a href="#vue-ssr-了解" class="header-anchor">#</a> Vue SSR 了解</h4> <p>服务器端渲染 vs 预渲染
beforeCreate，created 也会在服务端调用
node 端渲染页面</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 调用vue-server-renderer内部createBundleRenderer函数创建renderer</span>
<span class="token keyword">let</span> renderer <span class="token operator">=</span> <span class="token function">createBundleRenderer</span><span class="token punctuation">(</span>serverBundle<span class="token punctuation">,</span> clientManifest<span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">renderer</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 使用renderer内的renderToString方法将内容变成html字符串然后发送到客户端</span>
    <span class="token comment">/* context里
    {
      url: req.originalUrl,
      title: 'xxx',
      data: {
        storeContent
      }
    }
    */</span>
    renderer<span class="token punctuation">.</span><span class="token function">renderToString</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">html</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token string">&quot;Content-Type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text/html&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// vue页面里可以通过vm.$ssrContext拿到服务端context内容</span>
<span class="token function">serverPrefetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 惰性注册(lazy-register)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">registerModule</span><span class="token punctuation">(</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span> dataStore<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span>
      <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$ssrContext<span class="token punctuation">.</span>data<span class="token punctuation">.</span>storeContent
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="小程序方向"><a href="#小程序方向" class="header-anchor">#</a> 小程序方向</h4> <p>很久不写了，但是有底子，如果需要的话上手很快</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/mo/Interview/2020.html" class="prev">
        2020面试整理
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/mo/assets/js/app.6fbcfbdc.js" defer></script><script src="/mo/assets/js/2.3f89376a.js" defer></script><script src="/mo/assets/js/8.4a350904.js" defer></script>
  </body>
</html>
